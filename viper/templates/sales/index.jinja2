{% extends "templates/layout.jinja2" %}
{% block head %}
<style type="text/css">
#tblSalesFooter	{
}
#tblSalesFooter	h3{
	/*text-align: right;*/
}
</style>
{% endblock %}
{% block content %}
<section id="sales-page">
	 <div class="page-header">
      <h1>Sales
      	<div class="span8 pull-right"> 
      		<button id="new-order" class="btn btn-primary"><i class="icon-file icon-white"></i> New (F2)</button>
      		<button id="cancel-order" class="btn btn-warning"><i class="icon-remove icon-white"></i> Cancel (F4)</button>
      		<button id="checkout-order" class="btn btn-success"><i class="icon-ok icon-white"></i> Checkout (F5)</button>
      		<button id="print-order" class="btn btn-primary"><i class="icon-print icon-white"></i> Print (F11)</button>
      		<button id="preview-order" class="btn btn-primary"><i class="icon-eye-open icon-white"></i> Preview (F12)</button>
      	</div>
      </h1>
     </div> 
      <div class="row-fluid">
      	<div class="clear"/>
		<div class="span3">
			<h3>Today Orders
				<div class="pull-right">
					<button id="refresh-orders" class="btn btn-mini btn-info">
						<i class="icon-refresh icon-white"></i> Refresh
					</button>
				</div>
			</h3>
			<div style="height:510px;overflow:auto;">
			<table class="table table-striped table-bordered table-condensed" id="tblTodayOrders">
				<thead>
					<tr>
						<th>Order No#</th>
						<th>Customer</th>
						<th>Amount</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
			</div>
			<div class="span11">
				<h3>Special Items</h3>
				<table class="table table-striped table-bordered table-condensed">
					<tr><td>Plastic Bag `1</td><td><button class="btn btn-mini btn-info">Add</button></td></tr>
					<tr><td>Plastic Bag `2</td><td><button class="btn btn-mini btn-info">Add</button></td></tr>
					<tr><td>Plastic Bag `3</td><td><button class="btn btn-mini btn-info">Add</button></td></tr>
					<tr><td>Idly Paste</td><td><button class="btn btn-mini btn-info">Add</button></td></tr>
				</table>
			</div>
		</div>
		<div class="span9" style="border-left:1px solid #ccc;padding-left:10px;">
			<div class="span12">
		  		<div class="span6"><strong>Order No#</strong> <span id="orderNumber">0</span></div>
		  		<div class="span6" style="text-align:right"><strong>Order Date:</strong> <span id="orderDate"></span></div>
			  	</div>
			<table class="table">
				<thead>
					<tr>
						<th>Barcode:</th>
						<th>Item Name:</th>
						<th>Quantity:</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><input type="text" name="barcode"/></td>
						<td><input type="text" name="itemName"/></td>
						<td><input type="text" name="quantity" value="1"/></td>
						<td><button id="add-item" class="btn btn-primary"><i class="icon-plus icon-white"></i> Add </button></td>
					</tr>
				</tbody>
			</table>
			<div style="height:450px;overflow-y:auto;overflow-x:auto;">
				<table class="table table-striped table-bordered table-condensed" id="tblOrderLineItems">
					<thead>
						<tr>
							<th>Sl.No#</th>
							<th>Barcode</th>
							<th>Item Name</th>
							<th style="text-align:right;">MRP</th>
							<th style="text-align:right;">Price</th>
							<th style="text-align:right;">Discount</th>
							<th style="text-align:right;">Quantity</th>
							<th style="text-align:right;">Gross</th>
						</tr>
					</thead>
					<tbody>
						
					</tbody>
				</table>
			</div>
			<table class="table" id="tblSalesFooter">
				<tbody>
					<tr>
						<td>Total Items/Quantity: <span id="totalItemsQuantity">0/0</span></td>
						<td></td>
						<td><h3>Total Amount:</h3></td>
						<td width="150px" style="text-align:right;padding-right:50px"><h3 id="totalAmount">0.0</h3></td>
					</tr>
					<tr>
						<td>Savings: <b><span id="savingsAmount">0.0</span></b></td>
						<td></td>
						<td><h3>Paid Amount:</h3></td>
						<td style="text-align:right;padding-right:50px"><h3 id="paidAmount">0.0</h3></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td><h3 id="lblBalanceAmount">Balance/Change Amount:</h3></td>
						<td style="text-align:right;padding-right:50px"><h3 id="blanceAmount">0.0</h3></td>
					</tr>
				</tbody>
			</table>
		</div>
      </div>
</section>      
<section id="templates" style="display:none">
	<script type="text/template" id="tpl-lineitem">
		<tr data-barcode="<%= item.get('barcode') %>">
			<td class="sl"><%= item.get('slno') %></td>
			<td class="b"><%= item.get('barcode') %></td>
			<td class="n"><%= item.get('name') %></td>
			<td class="m" style="text-align:right;"><%= item.get('mrp') %></td>
			<td class="p" style="text-align:right;"><%= item.get('price') %></td>
			<td class="d" style="text-align:right;"><%= item.get('discount') %></td>
			<td class="q" style="text-align:right;"><%= item.get('quantity') %></td>
			<td class="st" style="text-align:right;font-weight:bold;"><%= item.get('subtotal').toFixed(2) %></td>
		</tr>
	</script>
	<script type="text/template" id="tpl-todayorderitem">
		<tr data-orderid="<%= item.get('orderid') %>">
			<td class="o"><a href="#" title="Click to edit!"><%= item.get('orderno') %></a></td>
			<td class="c"><%= item.get('customername') %></td>
			<td class="a" style="text-align:right;font-weight:bold;"><%= item.get('orderamount').toFixed(2) %></td>
		</tr>
	</script>	
</section>
{% endblock content %}
{% block footerscript %}
<script src="{{request.static_url('viper:static/js/salesapp/salesmodels.js')}}"></script>
<script src="{{request.static_url('viper:static/js/salesapp/salesapp.js')}}"></script>
<script>
	$(function(){
		$('input[name=barcode]').focus();
	});
</script>

{% endblock %}


